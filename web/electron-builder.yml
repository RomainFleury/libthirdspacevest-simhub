# electron-builder configuration
# https://www.electron.build/configuration/configuration

appId: com.thirdspace.vest
productName: Third Space Vest
copyright: Copyright Â© 2024 Third Space Vest Contributors

# Directories
directories:
  output: release
  buildResources: build

# Files to include in the app
files:
  - "dist/**/*"
  - "electron/**/*"
  - "package.json"
  # Exclude dev files
  - "!**/*.map"
  - "!**/node_modules/.cache"

# Extra resources (copied to resources folder, not asar)
# NOTE: Build the daemon first! (python modern-third-space/build/build-daemon.py)
extraResources:
  # The daemon executable (built by PyInstaller)
  # On Windows: vest-daemon.exe, on Linux/macOS: vest-daemon
  - from: "../modern-third-space/build/dist/"
    to: "daemon/"
    filter:
      - "vest-daemon*"

# Don't pack into asar (easier debugging, daemon access)
asar: true
asarUnpack:
  - "electron/**/*"

# Windows configuration
win:
  target:
    - target: nsis
      arch:
        - x64
  # Icon is optional - remove line if icon.ico doesn't exist
  # icon: build/icon.ico
  # Request admin rights if needed for USB access
  requestedExecutionLevel: asInvoker

# NSIS installer configuration  
nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  allowElevation: true
  # Icons are optional - uncomment when icon.ico exists
  # installerIcon: build/icon.ico
  # uninstallerIcon: build/icon.ico
  # installerHeaderIcon: build/icon.ico
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: Third Space Vest
  # License file (optional)
  # license: LICENSE.txt
  
# Portable version (no installer, just zip)
portable:
  artifactName: "${productName}-${version}-portable.zip"

# macOS configuration (for future)
mac:
  target:
    - target: dmg
      arch:
        - x64
        - arm64
  icon: build/icon.icns
  category: public.app-category.utilities

# Linux configuration (for future)
linux:
  target:
    - target: AppImage
      arch:
        - x64
  icon: build/icons
  category: Utility

# Publish configuration (for auto-updates)
# Uncomment and configure when ready for releases
# publish:
#   provider: github
#   owner: YourGitHubUsername
#   repo: libthirdspacevest-simhub
